import{b as Et}from"./chunk-AKGPCPJK.js";import{a as Nt}from"./chunk-72ZV2RTL.js";import{a as It,b as Tt}from"./chunk-TC2VSDNX.js";import{a as F}from"./chunk-GP456TAF.js";import{a as Ft}from"./chunk-6I7PN7HP.js";import{a as Mt,b as Dt}from"./chunk-QYOQXKGA.js";import{a as Vt}from"./chunk-HQV6Q54H.js";import{a as kt,b as Lt,c as $t}from"./chunk-Z2N3KAJX.js";import{c as ct,e as K,g as dt,h as ft,j as O,l as bt,n as _t,q as vt,r as gt,s as ht,u as Ct,x as St,z as xt}from"./chunk-ZUXETJBN.js";import{a as y,b as yt,c as At,e as G}from"./chunk-LOXVGAEK.js";import{a as A,c as wt}from"./chunk-QVSNJCSE.js";import{Ba as it,Ca as b,Gb as mt,Ha as l,Hb as B,Jb as P,La as rt,Ob as pt,P as q,Pa as n,Qa as a,R as Q,Ra as _,Sa as ot,Ta as at,V as g,Va as x,W as T,Wa as v,Xa as p,Y as c,Yb as ut,Z as S,a as D,ab as nt,b as I,bb as lt,c as Z,ca as d,cb as st,d as tt,da as f,eb as u,ec as W,f as et,gb as V,mb as $,sa as s,sb as j,tb as R,vb as J,wa as k,ya as L,za as N}from"./chunk-QYSCFILT.js";var H="attribute-values",h=class e{constructor(i,t){this.baseHttpClient=i;this.httpClient=t}create(i){return this.httpClient.post(`${A.apiUrl}/${H}`,i)}update(i,t){return this.httpClient.put(`${A.apiUrl}/${H}/${i}`,t)}delete(i){return this.httpClient.delete(`${A.apiUrl}/${H}/${i}`)}getData(i){return this.httpClient.post(`${A.apiUrl}/${H}/search`,i)}static \u0275fac=function(t){return new(t||e)(c(At),c(ut))};static \u0275prov=g({token:e,factory:e.\u0275fac,providedIn:"root"})};var Pt={data:{},filter:I(D({},Vt),{sortBy:"name"})},w=class e extends Ft{constructor(t,r){super(Pt);this._api=t;this._globalStore=r}data$=this.select(({data:t})=>t);vm$=this.select({data:this.data$,filter:this.filter$},{debounce:!0});delete=this.effect(et(Q(()=>this._globalStore.setLoading(!0)),q(t=>this._api.delete(t).pipe(y({next:r=>{this._globalStore.setSuccess("Deleted successfully")},error:r=>{this._globalStore.setLoading(!1),this._globalStore.setError(F(r))},finalize:()=>this._globalStore.setLoading(!1)})))));loadData=this.effect(t=>t.pipe(Q(()=>this._globalStore.setLoading(!0)),q(r=>this._api.getData(r).pipe(y({next:o=>this.patchState({data:o}),error:o=>this._globalStore.setError(F(o)),complete:()=>this._globalStore.setLoading(!1)})))));static \u0275fac=function(r){return new(r||e)(c(h),c(G))};static \u0275prov=g({token:e,factory:e.\u0275fac})};var Ot={},M=class e extends yt{constructor(t,r){super(Ot);this._api=t;this._globalStore=r}saveData=t=>{let X=t,{id:r}=X,o=Z(X,["id"]),m=r?this._api.update(r,t):this._api.create(o);return this._globalStore.setLoading(!0),m.pipe(y({next:Y=>{this._globalStore.setSuccess("Saved successfully")},error:Y=>{this._globalStore.setLoading(!1),this._globalStore.setError(F(Y))},finalize:()=>this._globalStore.setLoading(!1)}))};static \u0275fac=function(r){return new(r||e)(c(h),c(G))};static \u0275prov=g({token:e,factory:e.\u0275fac})};var Ut=["modal"];function zt(e,i){if(e&1&&(n(0,"option",14),u(1),a()),e&2){let t=i.$implicit;l("value",t.id),s(),V(" ",t.name," ")}}function qt(e,i){if(e&1){let t=x();n(0,"div",3)(1,"form",4)(2,"div",5)(3,"label",6),u(4,"Name"),a(),_(5,"input",7),a(),n(6,"div",5)(7,"label",6),u(8,"Attribute"),a(),n(9,"select",8)(10,"option",9),u(11,"Select Attribute"),a(),b(12,zt,2,2,"option",10),a()(),n(13,"div",11)(14,"button",12),v("click",function(){d(t);let o=p(2);return f(o.closeMe())}),u(15," Close "),a(),n(16,"button",13),v("click",function(){d(t);let o=p(2);return f(o.save())}),u(17),a()()()()}if(e&2){let t=p().ngIf,r=p();s(),l("formGroup",r.form),s(11),l("ngForOf",t.attributes),s(4),rt("btn ",r.saveButtonClass,""),l("disabled",r.saveButtonDisabled),s(),V(" ",r.saveButtonText," ")}}function Qt(e,i){if(e&1&&(n(0,"div",1),b(1,qt,18,7,"div",2),a()),e&2){let t=p();s(),l("ngIf",t.form)}}var E=class e extends Mt{constructor(t){super();this.fb=t}content;form;_lookupStore=S(Et);lookupVm$=this._lookupStore.vm$;_formStore=S(M);ngOnInit(){this.initializeForm(),this._lookupStore.getAttributes(),this.formData?.id&&this.patchForm()}save(){if(this.form?.valid){let t={name:this.form.value.name,attribute_id:this.form.value.attribute_id};this.form.value.id&&(t.id=this.form.value.id),this._formStore.saveData(t).subscribe(r=>{this.confirm()})}}patchForm(){this.form?.patchValue({id:this.formData.id,name:this.formData.name,attribute_id:this.formData.attribute_id})}initializeForm(){this.form=this.fb.group({id:new O(null),name:new O("",[K.required]),attribute_id:new O("",[K.required])})}static \u0275fac=function(r){return new(r||e)(k(St))};static \u0275cmp=L({type:e,selectors:[["app-form"]],viewQuery:function(r,o){if(r&1&&nt(Ut,5),r&2){let m;lt(m=st())&&(o.content=m.first)}},standalone:!1,features:[$([M]),it],decls:2,vars:3,consts:[["class","card p-3",4,"ngIf"],[1,"card","p-3"],["class","card-body",4,"ngIf"],[1,"card-body"],["admin-form","","method","post",1,"form-horizontal",3,"formGroup"],[1,"mb-3"],["for","exampleInputEmail1",1,"form-label"],["type","text","id","name","name","name","placeholder","Name","formControlName","name",1,"form-control"],["id","attribute_id","name","attribute_id","formControlName","attribute_id",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"modal-footer"],["data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","submit",3,"click","disabled"],[3,"value"]],template:function(r,o){r&1&&(b(0,Qt,2,1,"div",0),j(1,"async")),r&2&&l("ngIf",R(1,1,o.lookupVm$))},dependencies:[mt,B,It,Tt,bt,ht,Ct,ct,gt,dt,ft,_t,vt,P],encapsulation:2})};function Jt(e,i){if(e&1&&u(0),e&2){let t=i.item;V(" ",t.attribute.name," ")}}function Kt(e,i){if(e&1){let t=x();n(0,"div",9)(1,"button",10),_(2,"i",11),a(),n(3,"ul",12)(4,"li")(5,"a",13),v("click",function(){let o=d(t).item,m=p(2);return f(m.edit(o))}),_(6,"i",14),u(7," Edit "),a()(),n(8,"li")(9,"a",15),v("click",function(){let o=d(t).item,m=p(2);return f(m.delete(o))}),_(10,"i",16),u(11," Delete "),a()()()()}}function Wt(e,i){if(e&1){let t=x();ot(0),n(1,"app-table",4),v("addButton",function(o){d(t);let m=p();return f(m.add(o))})("reload",function(){d(t);let o=p();return f(o.reload())})("changePage",function(o){d(t);let m=p();return f(m.pageChanged(o))}),_(2,"data-table-column",5)(3,"data-table-column",6),n(4,"data-table-column",7),b(5,Jt,1,1,"ng-template",null,2,J),a(),n(7,"data-table-column",8),b(8,Kt,12,0,"ng-template",null,2,J),a()(),at()}if(e&2){let t=i.ngIf;s(),l("indexColumn",!1)("sortBy",t.filter==null?null:t.filter.sortBy)("sortDir",t.filter==null?null:t.filter.sortDir)("itemCount",t.data==null?null:t.data.total)("items",t.data==null?null:t.data.data)("page",t.filter==null?null:t.filter.page),s(),l("sortable",!0),s(),l("sortable",!0),s(),l("sortable",!1),s(3),l("sortable",!1)}}var U=class e{constructor(i){this.modalService=i}dtOptions={};_store=S(w);vm$=this._store.vm$;ngOnInit(){this._store.loadData(this._store.filter$)}delete=i=>tt(this,null,function*(){this.modalService.openConfirmationModal({modalTitle:"Are you sure?",modalBody:"click confirm or close"}).subscribe(t=>{this._store.delete(i.id),this._store.reset()})});add(i){i.preventDefault(),this.modalService.openModal(E,null,{modalTitle:"Create Attribute Value"}).subscribe(t=>{this._store.reset()})}edit(i){this.modalService.openModal(E,i,{modalTitle:"Edit Attribute Value"}).subscribe(t=>{this._store.reset()})}pageChanged(i){let t=[];t.push({column:"name",value:wt(i),operator:"like"}),i=I(D({},i),{searchFilters:t}),this._store.updateFilter(i)}reload(){this._store.reset()}static \u0275fac=function(t){return new(t||e)(k(Dt))};static \u0275cmp=L({type:e,selectors:[["app-attribute-value-list"]],standalone:!1,features:[$([w])],decls:6,vars:3,consts:[["confirmationModal",""],["modal",""],["dataTableCell",""],[4,"ngIf"],["headerTitle","Attribute Values",3,"addButton","reload","changePage","indexColumn","sortBy","sortDir","itemCount","items","page"],["header","#","property","id",3,"sortable"],["header","Name","property","name",3,"sortable"],["header","Attribute","property","attribute",3,"sortable"],["header","Action",3,"sortable"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-expanded","false","aria-label","Settings",1,"btn","btn-icon","btn-ghost","rounded-circle"],[1,"fa-solid","fa-ellipsis-vertical",2,"font-size","22px"],[1,"dropdown-menu","dropdown-menu-end"],["href","javascript:void(0)",1,"dropdown-item",3,"click"],[1,"fa","fa-edit","opacity-75","me-2"],["href","javascript:void(0)",1,"dropdown-item","text-danger",3,"click"],[1,"fa","fa-trash","opacity-75","me-2"]],template:function(t,r){t&1&&(b(0,Wt,10,10,"ng-container",3),j(1,"async"),_(2,"div",null,0)(4,"div",null,1)),t&2&&l("ngIf",R(1,1,r.vm$))},dependencies:[B,Lt,kt,P],encapsulation:2})};var Xt=[{path:"",component:U}],z=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=N({type:e});static \u0275inj=T({imports:[W.forChild(Xt),W]})};var Rt=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=N({type:e});static \u0275inj=T({imports:[pt,z,Nt,$t,xt]})};export{Rt as AttributeValuesModule};
