import{a as Vt}from"./chunk-72ZV2RTL.js";import{a as Dt,b as Mt}from"./chunk-TC2VSDNX.js";import{a as y}from"./chunk-GP456TAF.js";import{a as xt}from"./chunk-6I7PN7HP.js";import{a as At,b as wt}from"./chunk-QYOQXKGA.js";import{a as Ct}from"./chunk-HQV6Q54H.js";import{a as Et,b as It,c as Tt}from"./chunk-Z2N3KAJX.js";import{c as ct,e as dt,g as ut,h as ft,j as z,l as bt,n as _t,q as gt,x as vt,z as ht}from"./chunk-ZUXETJBN.js";import{a as x,b as St,c as yt,e as B}from"./chunk-LOXVGAEK.js";import{a as F,c as Ft}from"./chunk-QVSNJCSE.js";import{Ba as Y,Ca as _,Gb as lt,Ha as m,Hb as R,Jb as st,La as Z,Ob as mt,P as G,Pa as n,Qa as a,R as H,Ra as f,Sa as tt,Ta as et,V as v,Va as S,W as I,Wa as g,Xa as p,Y as c,Yb as pt,Z as V,a as M,ab as it,b as E,bb as rt,c as K,ca as d,cb as ot,d as W,da as u,eb as b,ec as Q,f as X,gb as N,mb as $,sa as s,sb as nt,tb as at,vb as U,wa as T,ya as j,za as L}from"./chunk-QYSCFILT.js";var k="attributes",h=class e{constructor(i,t){this.baseHttpClient=i;this.httpClient=t}delete(i){return this.httpClient.delete(`${F.apiUrl}/${k}/${i}`)}create(i){return this.httpClient.post(`${F.apiUrl}/${k}`,i)}update(i,t){return this.httpClient.put(`${F.apiUrl}/${k}/${i}`,t)}getData(i){return this.httpClient.post(`${F.apiUrl}/${k}/search`,i)}static \u0275fac=function(t){return new(t||e)(c(yt),c(pt))};static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})};var $t={data:{},filter:E(M({},Ct),{sortBy:"name"})},A=class e extends xt{constructor(t,r){super($t);this._api=t;this._globalStore=r}data$=this.select(({data:t})=>t);vm$=this.select({data:this.data$,filter:this.filter$},{debounce:!0});delete=this.effect(X(H(()=>this._globalStore.setLoading(!0)),G(t=>this._api.delete(t).pipe(x({next:r=>{this._globalStore.setSuccess("Deleted successfully")},error:r=>{this._globalStore.setLoading(!1),this._globalStore.setError(y(r))},finalize:()=>this._globalStore.setLoading(!1)})))));loadData=this.effect(t=>t.pipe(H(()=>this._globalStore.setLoading(!0)),G(r=>this._api.getData(r).pipe(x({next:o=>this.patchState({data:o}),error:o=>this._globalStore.setError(y(o)),complete:()=>this._globalStore.setLoading(!1)})))));static \u0275fac=function(r){return new(r||e)(c(h),c(B))};static \u0275prov=v({token:e,factory:e.\u0275fac})};var Rt={},w=class e extends St{constructor(t,r){super(Rt);this._service=t;this._globalStore=r}saveData=t=>{let q=t,{id:r}=q,o=K(q,["id"]),l=r?this._service.update(r,t):this._service.create(o);return this._globalStore.setLoading(!0),l.pipe(x({next:J=>{this._globalStore.setSuccess("Saved successfully")},error:J=>{this._globalStore.setLoading(!1),this._globalStore.setError(y(J))},finalize:()=>this._globalStore.setLoading(!1)}))};static \u0275fac=function(r){return new(r||e)(c(h),c(B))};static \u0275prov=v({token:e,factory:e.\u0275fac})};var Pt=["modal"];function Ot(e,i){if(e&1){let t=S();n(0,"div",2)(1,"form",3)(2,"div",4)(3,"label",5),b(4,"Name"),a(),f(5,"input",6),a(),n(6,"div",7)(7,"button",8),g("click",function(){d(t);let o=p();return u(o.closeMe())}),b(8," Close "),a(),n(9,"button",9),g("click",function(){d(t);let o=p();return u(o.save())}),b(10),a()()()()}if(e&2){let t=p();s(),m("formGroup",t.form),s(8),Z("btn ",t.saveButtonClass,""),m("disabled",t.saveButtonDisabled),s(),N(" ",t.saveButtonText," ")}}var D=class e extends At{constructor(t){super();this.fb=t}content;form;_formStore=V(w);ngOnInit(){this.initializeForm(),this.formData?.id&&this.patchForm()}save(){if(this.form?.valid){let t={name:this.form.value.name};this.form.value.id&&(t.id=this.form.value.id),this._formStore.saveData(t).subscribe(r=>{this.confirm()})}}patchForm(){this.form?.patchValue({id:this.formData.id,name:this.formData.name})}initializeForm(){this.form=this.fb.group({id:new z(null),name:new z("",[dt.required])})}static \u0275fac=function(r){return new(r||e)(T(vt))};static \u0275cmp=j({type:e,selectors:[["app-form"]],viewQuery:function(r,o){if(r&1&&it(Pt,5),r&2){let l;rt(l=ot())&&(o.content=l.first)}},standalone:!1,features:[$([w]),Y],decls:2,vars:1,consts:[[1,"card","p-3"],["class","card-body",4,"ngIf"],[1,"card-body"],["admin-form","","method","post",1,"form-horizontal",3,"formGroup"],[1,"mb-3"],["for","exampleInputEmail1",1,"form-label"],["type","text","id","name","name","name","placeholder","Name","formControlName","name",1,"form-control"],[1,"modal-footer"],["data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","submit",3,"click","disabled"]],template:function(r,o){r&1&&(n(0,"div",0),_(1,Ot,11,6,"div",1),a()),r&2&&(s(),m("ngIf",o.form))},dependencies:[R,Dt,Mt,bt,ct,ut,ft,_t,gt],encapsulation:2})};function Gt(e,i){if(e&1&&(n(0,"div",10),b(1),a()),e&2){let t=i.$implicit;s(),N(" ",t.name," ")}}function Ht(e,i){if(e&1&&_(0,Gt,2,1,"div",9),e&2){let t=i.item;m("ngForOf",t.attribute_values)}}function Ut(e,i){if(e&1){let t=S();n(0,"div",11)(1,"button",12),f(2,"i",13),a(),n(3,"ul",14)(4,"li")(5,"a",15),g("click",function(){let o=d(t).item,l=p(2);return u(l.edit(o))}),f(6,"i",16),b(7," Edit "),a()(),n(8,"li")(9,"a",17),g("click",function(){let o=d(t).item,l=p(2);return u(l.delete(o))}),f(10,"i",18),b(11," Delete "),a()()()()}}function zt(e,i){if(e&1){let t=S();tt(0),n(1,"app-table",4),g("addButton",function(o){d(t);let l=p();return u(l.add(o))})("reload",function(){d(t);let o=p();return u(o.reload())})("changePage",function(o){d(t);let l=p();return u(l.pageChanged(o))}),f(2,"data-table-column",5)(3,"data-table-column",6),n(4,"data-table-column",7),_(5,Ht,1,1,"ng-template",null,2,U),a(),n(7,"data-table-column",8),_(8,Ut,12,0,"ng-template",null,2,U),a()(),et()}if(e&2){let t=i.ngIf;s(),m("indexColumn",!1)("sortBy",t.filter==null?null:t.filter.sortBy)("sortDir",t.filter==null?null:t.filter.sortDir)("itemCount",t.data==null?null:t.data.total)("searchText",t.filter==null?null:t.filter.searchText)("items",t.data==null?null:t.data.data)("page",t.filter==null?null:t.filter.page),s(),m("sortable",!0),s(),m("sortable",!0),s(),m("sortable",!1),s(3),m("sortable",!1)}}var P=class e{constructor(i){this.modalService=i}_store=V(A);vm$=this._store.vm$;ngOnInit(){this._store.loadData(this._store.filter$)}delete=i=>W(this,null,function*(){this.modalService.openConfirmationModal({modalTitle:"Are you sure?",modalBody:"click confirm or close"}).subscribe(t=>{this._store.delete(i.id),this._store.reset()})});add(i){i.preventDefault(),this.modalService.openModal(D,null,{modalTitle:"Create Attribute"}).subscribe(t=>{this._store.reset()})}edit(i){this.modalService.openModal(D,i,{modalTitle:"Edit Attribute"}).subscribe(t=>{this._store.reset()})}pageChanged(i){let t=[];t.push({column:"name",value:Ft(i),operator:"like"}),i=E(M({},i),{searchFilters:t}),this._store.updateFilter(i)}reload(){this._store.reset()}static \u0275fac=function(t){return new(t||e)(T(wt))};static \u0275cmp=j({type:e,selectors:[["app-attribute-list"]],standalone:!1,features:[$([A])],decls:6,vars:3,consts:[["confirmationModal",""],["modal",""],["dataTableCell",""],[4,"ngIf"],["headerTitle","Attributes",3,"addButton","reload","changePage","indexColumn","sortBy","sortDir","itemCount","searchText","items","page"],["header","#","property","id",3,"sortable"],["header","Name","property","name",3,"sortable"],["header","Values",3,"sortable"],["header","Action",3,"sortable"],["class","d-flex align-items-center justify-content-between",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center","justify-content-between"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-expanded","false","aria-label","Settings",1,"btn","btn-icon","btn-ghost","rounded-circle"],[1,"fa-solid","fa-ellipsis-vertical",2,"font-size","22px"],[1,"dropdown-menu","dropdown-menu-end"],["href","javascript:void(0)",1,"dropdown-item",3,"click"],[1,"fa","fa-edit","opacity-75","me-2"],["href","javascript:void(0)",1,"dropdown-item","text-danger",3,"click"],[1,"fa","fa-trash","opacity-75","me-2"]],template:function(t,r){t&1&&(_(0,zt,10,11,"ng-container",3),nt(1,"async"),f(2,"div",null,0)(4,"div",null,1)),t&2&&m("ngIf",at(1,1,r.vm$))},dependencies:[lt,R,It,Et,st],encapsulation:2})};var Qt=[{path:"",component:P}],O=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=L({type:e});static \u0275inj=I({imports:[Q.forChild(Qt),Q]})};var Lt=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=L({type:e});static \u0275inj=I({imports:[mt,O,Vt,Tt,ht]})};export{Lt as AttributesModule};
