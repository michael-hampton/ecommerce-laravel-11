import{a as S,e as Z,f as _}from"./chunk-QVSNJCSE.js";import{Bb as y,E as g,H as z,I as H,K as B,M as G,N as K,Q as d,R as f,S as k,T as D,Tb as J,Ub as Q,V as u,X as N,Y as l,Yb as X,Z as O,a as p,aa as Y,e as M,g as R,h as q,ia as E,j,k as I,l as $,m as h,n as A,na as C,o as L,q as m,r as P,s as x,u as b,v as U,xb as W}from"./chunk-QYSCFILT.js";function T(n,t){let e=!t?.manualCleanup;e&&!t?.injector&&Y(T);let r=e?t?.injector?.get(E)??O(E):null,o=se(t?.equal),s;t?.requireSync?s=C({kind:0},{equal:o}):s=C({kind:1,value:t?.initialValue},{equal:o});let c=n.subscribe({next:i=>s.set({kind:1,value:i}),error:i=>{if(t?.rejectErrors)throw i;s.set({kind:2,error:i})}});if(t?.requireSync&&s().kind===0)throw new D(601,!1);return r?.onDestroy(c.unsubscribe.bind(c)),y(()=>{let i=s();switch(i.kind){case 1:return i.value;case 2:throw i.error;case 0:throw new D(601,!1)}},{equal:t?.equal})}function se(n=Object.is){return(t,e)=>t.kind===1&&e.kind===1&&n(t.value,e.value)}function ie(){return n=>new R(t=>{let e,r,o=new M;return o.add(n.subscribe({complete:()=>{e&&t.next(r),t.complete()},error:s=>{t.error(s)},next:s=>{r=s,e||(e=I.schedule(()=>{t.next(r),e=void 0}),o.add(e))}})),o})}function V(n){return typeof n.ngrxOnStoreInit=="function"}function ee(n){return typeof n.ngrxOnStateInit=="function"}var ce=new N("@ngrx/component-store Initial State"),re=(()=>{class n{constructor(e){this.destroySubject$=new j(1),this.destroy$=this.destroySubject$.asObservable(),this.stateSubject$=new j(1),this.isInitialized=!1,this.state$=this.select(r=>r),this.state=T(this.stateSubject$.pipe(d(this.destroy$)),{requireSync:!1,manualCleanup:!0}),this.\u0275hasProvider=!1,e&&this.initState(e),this.checkProviderForHooks()}ngOnDestroy(){this.stateSubject$.complete(),this.destroySubject$.next()}updater(e){return r=>{let o=!0,s,i=(x(r)?r:m(r)).pipe(A($),f(()=>this.assertStateIsInitialized()),k(this.stateSubject$),b(([a,w])=>e(w,a)),f(a=>this.stateSubject$.next(a)),g(a=>o?(s=a,h):P(a)),d(this.destroy$)).subscribe();if(s)throw s;return o=!1,i}}initState(e){L([e],$).subscribe(r=>{this.isInitialized=!0,this.stateSubject$.next(r)})}setState(e){typeof e!="function"?this.initState(e):this.updater(e)()}patchState(e){let r=typeof e=="function"?e(this.get()):e;this.updater((o,s)=>p(p({},o),s))(r)}get(e){this.assertStateIsInitialized();let r;return this.stateSubject$.pipe(z(1)).subscribe(o=>{r=e?e(o):o}),r}select(...e){let{observablesOrSelectorsObject:r,projector:o,config:s}=ae(e);return(le(r,o)?this.stateSubject$:U(r)).pipe(s.debounce?ie():te(),o?b(i=>r.length>0&&Array.isArray(i)?o(...i):o(i)):te(),H(s.equal),K({refCount:!0,bufferSize:1}),d(this.destroy$))}selectSignal(...e){let r=[...e],o=typeof r[e.length-1]=="object"?r.pop():{},s=r.pop(),c=r,i=c.length===0?()=>s(this.state()):()=>{let a=c.map(w=>w());return s(...a)};return y(i,o)}effect(e){let r=new q;return e(r).pipe(d(this.destroy$)).subscribe(),o=>(x(o)?o:m(o)).pipe(d(this.destroy$)).subscribe(c=>{r.next(c)})}checkProviderForHooks(){I.schedule(()=>{if(W()&&(V(this)||ee(this))&&!this.\u0275hasProvider){let e=[V(this)?"OnStoreInit":"",ee(this)?"OnStateInit":""].filter(r=>r);console.warn(`@ngrx/component-store: ${this.constructor.name} has the ${e.join(" and ")} lifecycle hook(s) implemented without being provided using the provideComponentStore(${this.constructor.name}) function. To resolve this, provide the component store via provideComponentStore(${this.constructor.name})`)}})}assertStateIsInitialized(){if(!this.isInitialized)throw new Error(`${this.constructor.name} has not been initialized yet. Please make sure it is initialized before updating/getting.`)}static{this.\u0275fac=function(r){return new(r||n)(l(ce,8))}}static{this.\u0275prov=u({token:n,factory:n.\u0275fac})}}return n})();function ae(n){let t=Array.from(n),r={debounce:!1,equal:(c,i)=>c===i};if(ue(t[t.length-1])&&(r=p(p({},r),t.pop())),t.length===1&&typeof t[0]!="function")return{observablesOrSelectorsObject:t[0],projector:void 0,config:r};let o=t.pop();return{observablesOrSelectorsObject:t,projector:o,config:r}}function ue(n){let t=n;return typeof t.debounce<"u"||typeof t.equal<"u"}function le(n,t){return Array.isArray(n)&&n.length===0&&t}function te(){return n=>n}var v=class n extends Z{constructor(){super(),this.SetState({show:!1,current:0}),this.stateItem$=this.stateItem$.pipe(G())}show(t){let e=this.currentItem.current+1;this.UpdateState({show:!0,source:t,current:e})}hide(t){let e=this.currentItem.current-1;this.UpdateState({show:!1,source:t,current:e})}static \u0275fac=function(e){return new(e||n)};static \u0275prov=u({token:n,factory:n.\u0275fac,providedIn:"root"})};var de={loading:!1,error:"",success:""},ne=class n extends re{constructor(e,r){super(de);this.toast=e;this.loader=r}loading$=this.select(e=>e.loading);error$=this.select(e=>e.error);success$=this.select(e=>e.success);vm$=this.select({loading:this.loading$,error:this.error$,success:this.success$},{debounce:!0});setError(e){this.toast.ShowError(e.code,{},e.message),this.setLoading(!1),this.patchState({error:e.message})}setLoading(e){return this.patchState({loading:e}),e?this.loader.show():this.loader.hide()}setSuccess(e){this.toast.ShowSuccess(null,{},e),this.patchState({success:e})}static \u0275fac=function(r){return new(r||n)(l(_),l(v))};static \u0275prov=u({token:n,factory:n.\u0275fac,providedIn:"root"})};function Be(n,t,e){let r=typeof n=="function"?{next:n,error:t,complete:e}:n;return o=>o.pipe(f({next:r.next,complete:r.complete}),g(s=>(r.error(s),h)),r.finalize?B(r.finalize):s=>s)}var oe=class n{constructor(t){this.httpclient=t}get(t,e){let r={page:t.page,limit:t.limit,sortBy:t.sortBy,sortDir:t.sortDir,searchText:t.searchText},o=new Q({fromObject:r});return this.httpclient.get(`${S.apiUrl}/${e}`,{params:o})}getAll(t){return this.httpclient.get(`${S.apiUrl}/${t}`)}getById(t){return this.httpclient.get(`${S.apiUrl}/${t}`)}update(t,e){let r=this.getFormData(e);return r.append("_method","PUT"),this.httpclient.post(`${t}`,r,{headers:new J({ContentType:"application/json"})})}getFormData(t,e=void 0){return e||(e=new FormData),Object.keys(t).forEach(r=>e.append(r,t[r])),e}static \u0275fac=function(e){return new(e||n)(l(X))};static \u0275prov=u({token:n,factory:n.\u0275fac,providedIn:"root"})};export{Be as a,re as b,oe as c,v as d,ne as e};
