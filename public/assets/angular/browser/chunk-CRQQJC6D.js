import{a as ae}from"./chunk-DHAGYSFQ.js";import{a as T}from"./chunk-GP456TAF.js";import{a as Z}from"./chunk-6I7PN7HP.js";import{b as ie}from"./chunk-QYOQXKGA.js";import{a as Y}from"./chunk-HQV6Q54H.js";import{a as oe,b as re,c as ne}from"./chunk-Z2N3KAJX.js";import"./chunk-ZUXETJBN.js";import{a as w,e as te}from"./chunk-LOXVGAEK.js";import{c as ee}from"./chunk-QVSNJCSE.js";import{Ca as f,Ha as m,Hb as Q,Jb as W,Ma as A,Ob as X,P as k,Pa as a,Qa as s,R as M,Ra as p,Sa as z,Ta as G,V as B,Va as b,W as S,Wa as u,Xa as c,Y as V,Z as N,_a as F,a as g,b as h,ca as d,d as j,da as _,eb as v,ec as I,f as P,fb as U,mb as q,qa as $,sa as l,sb as J,tb as K,vb as y,wa as H,ya as O,za as x}from"./chunk-QYSCFILT.js";var se={data:{},filter:h(g({},Y),{sortBy:"name"})},C=class t extends Z{constructor(e,o){super(se);this._api=e;this._globalStore=o}data$=this.select(({data:e})=>e);vm$=this.select({data:this.data$,filter:this.filter$},{debounce:!0});delete=this.effect(P(M(()=>this._globalStore.setLoading(!0)),k(e=>this._api.delete(e).pipe(w({next:o=>{this._globalStore.setSuccess("Deleted successfully")},error:o=>{this._globalStore.setLoading(!1),this._globalStore.setError(T(o))},finalize:()=>this._globalStore.setLoading(!1)})))));makeActive(e,o){return this._api.toggleActive(o.id,e).pipe(w({next:r=>{o.active=!o.active,this.patchState(n=>({data:h(g({},n.data),{data:n.data.data.map(R=>R.id===o.id?o:R)})})),this._globalStore.setSuccess("Saved successfully")},error:r=>this._globalStore.setError(T(r)),finalize:()=>this._globalStore.setLoading(!1)}))}loadData=this.effect(e=>e.pipe(M(()=>this._globalStore.setLoading(!0)),k(o=>this._api.getData(o).pipe(w({next:r=>this.patchState({data:r}),error:r=>this._globalStore.setError(T(r)),complete:()=>this._globalStore.setLoading(!1)})))));static \u0275fac=function(o){return new(o||t)(V(ae),V(te))};static \u0275prov=B({token:t,factory:t.\u0275fac})};function me(t,i){if(t&1&&(a(0,"div",11),p(1,"img",12),a(2,"div",13)(3,"a",14),v(4),s()()()),t&2){let e=i.item;l(),F("src",e.profile_picture,$),F("alt",e.name),l(3),U(e.name)}}function ce(t,i){if(t&1){let e=b();a(0,"i",17),u("click",function(){d(e);let r=c().item,n=c(2);return _(n.makeActive(r))}),s()}}function pe(t,i){if(t&1){let e=b();a(0,"i",18),u("click",function(){d(e);let r=c().item,n=c(2);return _(n.makeActive(r))}),s()}}function de(t,i){if(t&1&&f(0,ce,1,0,"i",15)(1,pe,1,0,"i",16),t&2){let e=i.item;A(e.active===!0?0:1)}}function _e(t,i){t&1&&v(0," Hide ")}function fe(t,i){t&1&&v(0,"Activate ")}function ue(t,i){if(t&1){let e=b();a(0,"div",19)(1,"button",20),p(2,"i",21),s(),a(3,"ul",22)(4,"li")(5,"a",23),u("click",function(){let r=d(e).item,n=c(2);return _(n.makeActive(r))}),p(6,"i",24),f(7,_e,1,0)(8,fe,1,0),s()(),a(9,"li")(10,"a",25),u("click",function(){let r=d(e).item,n=c(2);return _(n.delete(r))}),p(11,"i",26),v(12," Delete "),s()()()()}if(t&2){let e=i.item;l(7),A(e.active?7:8)}}function ge(t,i){if(t&1){let e=b();z(0),a(1,"app-table",4),u("reload",function(){d(e);let r=c();return _(r.reload())})("changePage",function(r){d(e);let n=c();return _(n.pageChanged(r))}),p(2,"data-table-column",5),a(3,"data-table-column",6),f(4,me,5,3,"ng-template",null,2,y),s(),p(6,"data-table-column",7)(7,"data-table-column",8),a(8,"data-table-column",9),f(9,de,2,1,"ng-template",null,2,y),s(),a(11,"data-table-column",10),f(12,ue,13,1,"ng-template",null,2,y),s()(),G()}if(t&2){let e=i.ngIf;l(),m("indexColumn",!1)("sortBy",e.filter==null?null:e.filter.sortBy)("sortDir",e.filter==null?null:e.filter.sortDir)("searchText",e.filter==null?null:e.filter.searchText)("itemCount",e.data==null?null:e.data.total)("items",e.data==null?null:e.data.data)("page",e.filter==null?null:e.filter.page),l(),m("sortable",!0),l(),m("sortable",!0),l(3),m("sortable",!0),l(),m("sortable",!0),l(),m("sortable",!1),l(3),m("sortable",!1)}}var L=class t{constructor(i){this.modalService=i}_store=N(C);vm$=this._store.vm$;ngOnInit(){this._store.loadData(this._store.filter$)}makeActive(i){let e=i.active?"This will prevent the seller from being able to log in. They will no longer be able to access their account including adding new listings and managing their orders":"This will mean the seller can log in and access their account including adding new listings and managing their orders",o=i.active?"Hide":"Publish";this.modalService.openConfirmationModal({modalTitle:"Are you sure?",modalBody:e,saveButtonLabel:o}).subscribe(r=>{this._store.makeActive(i.active!==!0,i).subscribe()})}delete=i=>j(this,null,function*(){this.modalService.openConfirmationModal({modalTitle:"Are you sure?",modalBody:"click confirm or close"}).subscribe(e=>{this._store.delete(i.id),this._store.reset()})});pageChanged(i){let e=[];e.push({column:"name",value:ee(i),operator:"like"}),i=h(g({},i),{searchFilters:e}),this._store.updateFilter(i)}reload(){this._store.reset()}static \u0275fac=function(e){return new(e||t)(H(ie))};static \u0275cmp=O({type:t,selectors:[["app-list"]],standalone:!1,features:[q([C])],decls:6,vars:3,consts:[["confirmationModal",""],["modal",""],["dataTableCell",""],[4,"ngIf"],["headerTitle","Sellers",3,"reload","changePage","indexColumn","sortBy","sortDir","searchText","itemCount","items","page"],["header","#","property","id",3,"sortable"],["header","Name","property","name",3,"sortable"],["header","Email","property","email",3,"sortable"],["header","Phone","property","phone",3,"sortable"],["header","Active","property","active",3,"sortable"],["header","Action",3,"sortable"],[1,"d-flex","align-items-center","justify-content-between","me-3"],[1,"image",2,"width","100px",3,"src","alt"],[1,""],["href","#",1,"fw-bold"],[1,"fa","fa-check",2,"cursor","pointer"],[1,"fa","fa-times-circle",2,"cursor","pointer"],[1,"fa","fa-check",2,"cursor","pointer",3,"click"],[1,"fa","fa-times-circle",2,"cursor","pointer",3,"click"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-expanded","false","aria-label","Settings",1,"btn","btn-icon","btn-ghost","rounded-circle"],[1,"fa-solid","fa-ellipsis-vertical",2,"font-size","22px"],[1,"dropdown-menu","dropdown-menu-end"],["href","javascript:void(0)",1,"dropdown-item",3,"click"],[1,"fa","fa-archive","opacity-75","me-2"],["href","javascript:void(0)",1,"dropdown-item","text-danger",3,"click"],[1,"fa","fa-trash","opacity-75","me-2"]],template:function(e,o){e&1&&(f(0,ge,14,13,"ng-container",3),J(1,"async"),p(2,"div",null,0)(4,"div",null,1)),e&2&&m("ngIf",K(1,1,o.vm$))},dependencies:[Q,re,oe,W],encapsulation:2})};var he=[{path:"",component:L}],E=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=x({type:t});static \u0275inj=S({imports:[I.forChild(he),I]})};var le=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=x({type:t});static \u0275inj=S({imports:[X,E,ne]})};export{le as SellersModule};
