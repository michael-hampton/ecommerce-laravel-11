import{a as Ae}from"./chunk-72ZV2RTL.js";import{a as Me,b as Ve}from"./chunk-TC2VSDNX.js";import{a as y}from"./chunk-GP456TAF.js";import{a as Ee}from"./chunk-6I7PN7HP.js";import{a as Ie,b as Le}from"./chunk-QYOQXKGA.js";import{a as Fe}from"./chunk-HQV6Q54H.js";import{a as Pe,b as $e,c as Re}from"./chunk-Z2N3KAJX.js";import{b as ge,c as he,e as b,g as ve,h as be,j as v,l as Se,n as Ce,q as xe,x as ye,z as we}from"./chunk-ZUXETJBN.js";import{a as x,b as ke,c as Te,e as J}from"./chunk-LOXVGAEK.js";import{a as w,c as De}from"./chunk-QVSNJCSE.js";import{Ba as ne,Ca as _,Ha as p,Hb as z,Jb as Q,La as ae,Ma as Z,Ob as ue,P as X,Pa as a,Qa as n,R as Y,Ra as s,Sa as le,Ta as me,V as C,Va as S,W as R,Wa as g,Xa as d,Y as h,Yb as _e,Z as j,_a as U,a as E,ab as se,b as T,bb as ce,c as ie,ca as f,cb as pe,d as A,da as u,eb as c,ec as ee,f as re,fb as de,gb as fe,mb as G,qa as D,sa as m,sb as O,t as oe,tb as q,vb as I,wa as B,ya as N,za as H}from"./chunk-QYSCFILT.js";var L="slides",F=class t{constructor(i,e){this.baseHttpClient=i;this.httpClient=e}delete(i){return this.httpClient.delete(`${w.apiUrl}/${L}/${i}`)}toggleActive(i){return this.httpClient.delete(`${w.apiUrl}/${L}/${i}/active`)}create(i){return this.httpClient.post(`${w.apiUrl}/${L}`,this.baseHttpClient.getFormData(i))}update(i,e){return this.baseHttpClient.update(`${w.apiUrl}/${L}/${i}`,e)}getData(i){return this.httpClient.post(`${w.apiUrl}/${L}/search`,i)}static \u0275fac=function(e){return new(e||t)(h(Te),h(_e))};static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})};var He={data:{},filter:T(E({},Fe),{sortBy:"title"})},M=class t extends Ee{constructor(e,r){super(He);this._api=e;this._globalStore=r}data$=this.select(({data:e})=>e);vm$=this.select({data:this.data$,filter:this.filter$},{debounce:!0});delete=this.effect(re(Y(()=>this._globalStore.setLoading(!0)),X(e=>this._api.delete(e).pipe(x({next:r=>this._globalStore.setSuccess("Deleted successfully"),error:r=>this._globalStore.setError(y(r)),finalize:()=>this._globalStore.setLoading(!1)})))));makeActive(e){return this._api.toggleActive(e.id).pipe(x({next:r=>{e.active=e.active?0:1,this.patchState(o=>({data:T(E({},o.data),{data:o.data.data.map(l=>l.id===e.id?e:l)})})),this._globalStore.setSuccess("Saved successfully")},error:r=>this._globalStore.setError(y(r)),finalize:()=>this._globalStore.setLoading(!1)}))}loadData=this.effect(e=>e.pipe(Y(()=>this._globalStore.setLoading(!0)),X(r=>this._api.getData(r).pipe(x({next:o=>this.patchState({data:o}),error:o=>this._globalStore.setError(y(o)),complete:()=>this._globalStore.setLoading(!1)})))));static \u0275fac=function(r){return new(r||t)(h(F),h(J))};static \u0275prov=C({token:t,factory:t.\u0275fac})};var Ue={imagePreview:"",currentFile:void 0},V=class t extends ke{constructor(e,r){super(Ue);this._api=e;this._globalStore=r}file$=this.select(e=>e.currentFile);image$=this.select(({imagePreview:e})=>e);vm$=this.select(e=>({imagePreview:e.imagePreview}));saveData=e=>{let $=e,{id:r}=$,o=ie($,["id"]),l=r?this._api.update(r,e):this._api.create(o);return this._globalStore.setLoading(!0),l.pipe(x({next:te=>{this._globalStore.setSuccess("Saved successfully")},error:te=>{this._globalStore.setLoading(!1),this._globalStore.setError(y(te))},finalize:()=>this._globalStore.setLoading(!1)}))};selectFile(e){this.patchState({imagePreview:""});let r=e.target.files;if(r){let o=r.item(0);if(o){this.patchState({imagePreview:"",currentFile:o});let l=new FileReader;l.onload=$=>{this.patchState({imagePreview:$.target.result})},l.readAsDataURL(o)}}}addImage=this.updater((e,r)=>({imagePreview:r}));static \u0275fac=function(r){return new(r||t)(h(F),h(J))};static \u0275prov=C({token:t,factory:t.\u0275fac})};var qe=["modal"];function ze(t,i){if(t&1&&(a(0,"div",26),s(1,"img",27),n()),t&2){let e=i.ngIf;m(),p("src",e,D)}}function Qe(t,i){if(t&1){let e=S();a(0,"div",2)(1,"form",3)(2,"div",4)(3,"label",5),c(4,"Title"),n(),s(5,"input",6),n(),a(6,"div",4)(7,"label",5),c(8,"SubTitle"),n(),s(9,"input",7),n(),a(10,"div",4)(11,"label",5),c(12,"Tags"),n(),s(13,"input",8),n(),a(14,"div",4)(15,"label",5),c(16,"Link"),n(),s(17,"input",9),n(),a(18,"div",4)(19,"label",5),c(20,"Link Text"),n(),s(21,"input",10),n(),a(22,"div",11),s(23,"input",12),a(24,"label",13),c(25," Active "),n()(),a(26,"div")(27,"label",5),c(28,"Upload Image"),n()(),a(29,"div",14),_(30,ze,2,1,"div",15),O(31,"async"),a(32,"div",16)(33,"label",17)(34,"span",18),s(35,"i",19),n(),a(36,"span",20),c(37,"Drop your images here or select "),a(38,"span",21),c(39,"click to browse"),n()(),a(40,"input",22),g("change",function(o){f(e);let l=d();return u(l._formStore.selectFile(o))}),n()()()(),a(41,"div",23)(42,"button",24),g("click",function(){f(e);let o=d();return u(o.closeMe())}),c(43," Close "),n(),a(44,"button",25),g("click",function(){f(e);let o=d();return u(o.save())}),c(45),n()()()()}if(t&2){let e=d();m(),p("formGroup",e.form),m(29),p("ngIf",q(31,7,e._formStore.image$)),m(14),ae("btn ",e.saveButtonClass,""),p("disabled",e.saveButtonDisabled),m(),fe(" ",e.saveButtonText," ")}}var P=class t extends Ie{constructor(e){super();this.fb=e}content;form;_formStore=j(V);formVm$=this._formStore.vm$;ngOnInit(){this.initializeForm(),this.formData?.id&&this.patchForm()}save(){return A(this,null,function*(){let e=yield oe(this._formStore.file$);if((e||this.formData?.image.length)&&this.form.controls.image.setErrors(null),this.form?.valid){let r={title:this.form.value.title,subtitle:this.form.value.subtitle,tags:this.form.value.tags,link:this.form.value.link,link_text:this.form.value.link_text,active:this.form.value.active===!0?1:0};e&&(r.image=e),this.form.value.id&&(r.id=this.form.value.id),this._formStore.saveData(r).subscribe(o=>{this.confirm()})}})}patchForm(){this.form?.patchValue({id:this.formData.id,title:this.formData.title,subtitle:this.formData.subtitle,tags:this.formData.tags,link:this.formData.link,link_text:this.formData.link_text,active:this.formData.active}),this._formStore.addImage(this.formData.image)}initializeForm(){this.form=this.fb.group({id:new v(null),title:new v("",[b.required]),subtitle:new v("",[b.required]),tags:new v("",[b.required]),link:new v("",[b.required]),link_text:new v("",[b.required]),active:new v(!0,[b.required]),image:new v("",[b.required])})}static \u0275fac=function(r){return new(r||t)(B(ye))};static \u0275cmp=N({type:t,selectors:[["app-form"]],viewQuery:function(r,o){if(r&1&&se(qe,5),r&2){let l;ce(l=pe())&&(o.content=l.first)}},standalone:!1,features:[G([V]),ne],decls:2,vars:1,consts:[[1,"card","p-3"],["class","card-body",4,"ngIf"],[1,"card-body"],["admin-form","","method","POST","enctype","multipart/form-data",3,"formGroup"],[1,"mb-3"],["for","exampleInputEmail1",1,"form-label"],["type","text","id","title","name","title","placeholder","Title","formControlName","title",1,"form-control"],["type","text","id","subtitle","name","subtitle","placeholder","Subtitle","formControlName","subtitle",1,"form-control"],["type","text","id","tags","name","tags","placeholder","Tags","formControlName","tags",1,"form-control"],["type","text","id","link","name","link","placeholder","Link","formControlName","link",1,"form-control"],["type","text","id","link_text","name","link_text","placeholder","Link Text","formControlName","link_text",1,"form-control"],[1,"form-check","mb-3"],["type","checkbox","formControlName","active","id","flexCheckDefault",1,"form-check-input"],["for","flexCheckDefault",1,"form-check-label"],[1,"upload-image","flex-grow"],["class","item","id","imgpreview",4,"ngIf"],["id","upload-file",1,"item","up-load"],["for","myFile",1,"uploadfile"],[1,"icon"],[1,"fa","fa-upload"],[1,"body-text"],[1,"tf-color"],["type","file","id","myFile","name","image","accept","image/*","formControlName","image",3,"change"],[1,"modal-footer"],["data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","submit",3,"click","disabled"],["id","imgpreview",1,"item"],["alt","",1,"effect8",3,"src"]],template:function(r,o){r&1&&(a(0,"div",0),_(1,Qe,46,9,"div",1),n()),r&2&&(m(),p("ngIf",o.form))},dependencies:[z,Me,Ve,Se,he,ge,ve,be,Ce,xe,Q],encapsulation:2})};function Je(t,i){if(t&1&&(a(0,"div",13),s(1,"img",14),n()),t&2){let e=i.item;m(),U("src",e.image,D),U("alt",e.title)}}function Ke(t,i){if(t&1&&(a(0,"a",15),c(1),n()),t&2){let e=i.item;U("href",e.link,D),m(),de(e.link_text)}}function We(t,i){if(t&1){let e=S();a(0,"i",18),g("click",function(){f(e);let o=d().item,l=d(2);return u(l.makeActive(o))}),n()}}function Xe(t,i){if(t&1){let e=S();a(0,"i",19),g("click",function(){f(e);let o=d().item,l=d(2);return u(l.makeActive(o))}),n()}}function Ye(t,i){if(t&1&&_(0,We,1,0,"i",16)(1,Xe,1,0,"i",17),t&2){let e=i.item;Z(e.active===!0?0:1)}}function Ze(t,i){t&1&&c(0," Hide ")}function et(t,i){t&1&&c(0,"Publish ")}function tt(t,i){if(t&1){let e=S();a(0,"div",20)(1,"button",21),s(2,"i",22),n(),a(3,"ul",23)(4,"li")(5,"a",24),g("click",function(){let o=f(e).item,l=d(2);return u(l.edit(o))}),s(6,"i",25),c(7," Edit "),n()(),a(8,"li")(9,"a",24),g("click",function(){let o=f(e).item,l=d(2);return u(l.makeActive(o))}),s(10,"i",26),_(11,Ze,1,0)(12,et,1,0),n()(),a(13,"li")(14,"a",27),g("click",function(){let o=f(e).item,l=d(2);return u(l.delete(o))}),s(15,"i",28),c(16," Delete "),n()()()()}if(t&2){let e=i.item;m(11),Z(e.active?11:12)}}function it(t,i){if(t&1){let e=S();le(0),a(1,"app-table",4),g("addButton",function(o){f(e);let l=d();return u(l.add(o))})("reload",function(){f(e);let o=d();return u(o.reload())})("changePage",function(o){f(e);let l=d();return u(l.pageChanged(o))}),s(2,"data-table-column",5),a(3,"data-table-column",6),_(4,Je,2,2,"ng-template",null,2,I),n(),s(6,"data-table-column",7)(7,"data-table-column",8)(8,"data-table-column",9),a(9,"data-table-column",10),_(10,Ke,2,2,"ng-template",null,2,I),n(),a(12,"data-table-column",11),_(13,Ye,2,1,"ng-template",null,2,I),n(),a(15,"data-table-column",12),_(16,tt,17,1,"ng-template",null,2,I),n()(),me()}if(t&2){let e=i.ngIf;m(),p("indexColumn",!1)("sortBy",e.filter==null?null:e.filter.sortBy)("sortDir",e.filter==null?null:e.filter.sortDir)("searchText",e.filter==null?null:e.filter.searchText)("itemCount",e.data==null?null:e.data.total)("items",e.data==null?null:e.data.data)("page",e.filter==null?null:e.filter.page),m(),p("sortable",!0),m(),p("sortable",!0),m(3),p("sortable",!0),m(),p("sortable",!0),m(),p("sortable",!0),m(),p("sortable",!0),m(3),p("sortable",!1),m(3),p("sortable",!1)}}var K=class t{constructor(i){this.modalService=i}_store=j(M);vm$=this._store.vm$;ngOnInit(){this._store.loadData(this._store.filter$)}delete=i=>A(this,null,function*(){this.modalService.openConfirmationModal({modalTitle:"Are you sure?",modalBody:"click confirm or close"}).subscribe(e=>{this._store.delete(i.id),this._store.reset()})});edit(i){this.modalService.openModal(P,i,{modalTitle:"Edit Slide"}).subscribe(e=>{this._store.reset()})}add(i){i.preventDefault(),this.modalService.openModal(P,null,{modalTitle:"Create Slide"}).subscribe(e=>{this._store.reset()})}pageChanged(i){let e=[];e.push({column:"title",value:De(i),operator:"like"}),i=T(E({},i),{searchFilters:e}),this._store.updateFilter(i)}reload(){this._store.reset()}makeActive(i){let e=i.active?"This will hide the slide from the banner on the homepage.":"This will show the slide in the banner on the homepage",r=i.active?"Hide":"Publish";this.modalService.openConfirmationModal({modalTitle:"Are you sure?",modalBody:e,saveButtonLabel:r}).subscribe(o=>{this._store.makeActive(i).subscribe()})}static \u0275fac=function(e){return new(e||t)(B(Le))};static \u0275cmp=N({type:t,selectors:[["app-slide-list"]],standalone:!1,features:[G([M])],decls:6,vars:3,consts:[["confirmationModal",""],["modal",""],["dataTableCell",""],[4,"ngIf"],["headerTitle","Slides",3,"addButton","reload","changePage","indexColumn","sortBy","sortDir","searchText","itemCount","items","page"],["header","#","property","id",3,"sortable"],["header","Image","property","image",3,"sortable"],["header","Tags","property","tags",3,"sortable"],["header","Title","property","title",3,"sortable"],["header","Subtitle","property","subtitle",3,"sortable"],["header","Link","property","link",3,"sortable"],["header","Active","property","active",3,"sortable"],["header","Action",3,"sortable"],[1,"d-flex","align-items-center","justify-content-between","me-3"],[1,"image",2,"width","100px",3,"src","alt"],["target","_blank",3,"href"],[1,"fa","fa-check",2,"cursor","pointer"],[1,"fa","fa-times-circle",2,"cursor","pointer"],[1,"fa","fa-check",2,"cursor","pointer",3,"click"],[1,"fa","fa-times-circle",2,"cursor","pointer",3,"click"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-expanded","false","aria-label","Settings",1,"btn","btn-icon","btn-ghost","rounded-circle"],[1,"fa-solid","fa-ellipsis-vertical",2,"font-size","22px"],[1,"dropdown-menu","dropdown-menu-end"],["href","javascript:void(0)",1,"dropdown-item",3,"click"],[1,"fa","fa-edit","opacity-75","me-2"],[1,"fa","fa-archive","opacity-75","me-2"],["href","javascript:void(0)",1,"dropdown-item","text-danger",3,"click"],[1,"fa","fa-trash","opacity-75","me-2"]],template:function(e,r){e&1&&(_(0,it,18,15,"ng-container",3),O(1,"async"),s(2,"div",null,0)(4,"div",null,1)),e&2&&p("ngIf",q(1,1,r.vm$))},dependencies:[z,$e,Pe,Q],encapsulation:2})};var rt=[{path:"",component:K}],W=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=H({type:t});static \u0275inj=R({imports:[ee.forChild(rt),ee]})};var Be=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=H({type:t});static \u0275inj=R({imports:[ue,W,Ae,Re,we]})};export{Be as SlidesModule};
